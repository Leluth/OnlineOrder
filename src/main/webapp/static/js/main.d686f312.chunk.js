(this["webpackJsonponlineorder-app"]=this["webpackJsonponlineorder-app"]||[]).push([[0],{153:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(23),s=n.n(r),i=(n(153),n(33)),o=n(241),l=n(237),u=n(86),j=n(136),d=n(108),h=n(106),b=n(145),f=n(235),O=n(239),m=n(243),p=n(58),g=n(244),x=n(245),y=n(246),S=function(e){var t=e.username,n=e.password,c="/login?username=".concat(t,"&password=").concat(n);return fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to log in")}))},v=function(e){return fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to sign up")}))},w=n(7),C=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,r=new Array(c),s=0;s<c;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.formRef=a.a.createRef(),e.onFinish=function(t){e.setState({loading:!0}),S(t).then((function(){b.b.success("Login Successfully"),e.props.onSuccess()})).catch((function(e){b.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e.onReset=function(){e.formRef.current.resetFields()},e}return Object(j.a)(n,[{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"render",value:function(){return Object(w.jsxs)(f.a,{name:"normal_login",ref:this.formRef,onFinish:this.onFinish,style:{width:400,margin:"auto"},children:[Object(w.jsx)("div",{style:{textAlign:"center",color:"white",fontSize:"80px",marginTop:"20%"},children:Object(w.jsx)(g.a,{})}),Object(w.jsx)(f.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(w.jsx)(O.a,{size:"large",prefix:Object(w.jsx)(x.a,{}),placeholder:"Username"})}),Object(w.jsx)(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(w.jsx)(O.a.Password,{size:"large",prefix:Object(w.jsx)(y.a,{}),placeholder:"Password"})}),Object(w.jsx)(f.a.Item,{style:{textAlign:"center"},children:Object(w.jsxs)(m.b,{size:"large",children:[Object(w.jsx)(p.a,{size:"large",type:"primary",htmlType:"submit",shape:"round",loading:this.state.loading,children:"Login"}),Object(w.jsx)(p.a,{size:"large",htmlType:"button",shape:"round",onClick:this.onReset,children:"Reset"})]})})]})}}]),n}(c.Component),k=C,I=n(238),F=n(247),P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={displayModal:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signupOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){v(t).then((function(){e.setState({displayModal:!1}),b.b.success("Successfully signed up")})).catch((function(e){b.b.error(e.message)}))},e.render=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.a,{shape:"round",type:"primary",icon:Object(w.jsx)(F.a,{}),onClick:e.signupOnClick,children:"Register"}),Object(w.jsx)(I.a,{title:"Register",visible:e.state.displayModal,onCancel:e.handleCancel,footer:null,destroyOnClose:!0,children:Object(w.jsxs)(f.a,{name:"normal_register",onFinish:e.onFinish,preserve:!1,children:[Object(w.jsx)(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(w.jsx)(O.a,{prefix:Object(w.jsx)(x.a,{}),placeholder:"Email"})}),Object(w.jsx)(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(w.jsx)(O.a.Password,{prefix:Object(w.jsx)(y.a,{}),placeholder:"Password"})}),Object(w.jsx)(f.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your first name!"}],children:Object(w.jsx)(O.a,{placeholder:"firstname"})}),Object(w.jsx)(f.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your last name!"}],children:Object(w.jsx)(O.a,{placeholder:"lastname"})}),Object(w.jsx)(f.a.Item,{children:Object(w.jsx)(p.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})},e}return n}(a.a.Component),T=P,E=n(76),L=n(56),R=n(236),z=n(234),M=n(148),q=E.a.Option,A=function(e){var t=e.itemId,n=Object(c.useState)(!1),a=Object(i.a)(n,2),r=a[0],s=a[1];return Object(w.jsx)(L.a,{title:"Add to shopping cart",children:Object(w.jsx)(p.a,{loading:r,type:"primary",icon:Object(w.jsx)(M.a,{}),onClick:function(){s(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){b.b.success("Successfully add item"),s(!1)})).catch((function(e){return b.b.error(e.message)})).finally((function(){s(!1)}))}})})},U=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],u=Object(c.useState)([]),j=Object(i.a)(u,2),d=j[0],h=j[1],f=Object(c.useState)(!1),O=Object(i.a)(f,2),m=O[0],p=O[1],g=Object(c.useState)(!1),x=Object(i.a)(g,2),y=x[0],S=x[1];return Object(c.useEffect)((function(){S(!0),fetch("/restaurants").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get restaurants");return e.json()})).then((function(e){h(e)})).catch((function(e){b.b.error(e.message)})).finally((function(){S(!1)}))}),[]),Object(c.useEffect)((function(){var e;o&&(p(!0),(e=o,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get menus");return e.json()}))).then((function(e){a(e)})).catch((function(e){b.b.error(e.message)})).finally((function(){p(!1)})))}),[o]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(E.a,{value:o,onSelect:function(e){return l(e)},placeholder:"Select a restaurant",loading:y,style:{width:300},onChange:function(){},children:d.map((function(e){return Object(w.jsx)(q,{value:e.id,children:e.name},e.id)}))}),o&&Object(w.jsx)(R.b,{style:{marginTop:20},loading:m,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:n,renderItem:function(e){return Object(w.jsx)(R.b.Item,{children:Object(w.jsxs)(z.a,{title:e.name,extra:Object(w.jsx)(A,{itemId:e.id}),children:[Object(w.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:"auto",width:"100%",display:"block"}}),"Price: $".concat(e.price)]})})}})]})},N=n(242),B=n(240),D=n(248),H=n(249),J=l.a.Text,$=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)({}),d=Object(i.a)(j,2),h=d[0],f=d[1],O=Object(c.useState)(!1),x=Object(i.a)(O,2),y=x[0],S=x[1],v=Object(c.useState)(!1),C=Object(i.a)(v,2),k=C[0],F=C[1];Object(c.useEffect)((function(){a&&(S(!0),fetch("/cart").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get shopping cart data");return e.json()})).then((function(e){f(e)})).catch((function(e){b.b.error(e.message)})).finally((function(){S(!1)})))}),[a]);var P=function(){r(!1)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(m.b,{size:"large",children:[Object(w.jsx)(p.a,{type:"primary",shape:"round",icon:Object(w.jsx)(g.a,{}),onClick:function(){r(!0)},children:"Cart"}),Object(w.jsx)(p.a,{shape:"round",icon:Object(w.jsx)(D.a,{}),onClick:function(){u(!0)},children:"log out"})]}),Object(w.jsx)(I.a,{visible:l,okText:"Yes",onOk:function(){u(!1),e.onLogout(),b.b.success("Logout Successfully")},onCancel:function(){u(!1)},children:Object(w.jsx)("p",{children:"Do you want to log out?"})}),Object(w.jsx)(N.a,{title:"My Shopping Cart",onClose:P,visible:a,width:400,footer:Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(w.jsx)(J,{strong:!0,children:"Total price: $".concat(h.totalPrice?h.totalPrice:0)}),Object(w.jsxs)("div",{children:[Object(w.jsx)(p.a,{onClick:P,style:{marginRight:8},children:"Cancel"}),Object(w.jsx)(p.a,{onClick:function(){F(!0),fetch("/checkout").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to checkout")})).then((function(){b.b.success("Successfully checkout"),r(!1)})).catch((function(e){b.b.error(e.message)})).finally((function(){F(!1)}))},type:"primary",loading:k,disabled:y||h.orderItemList&&0===h.orderItemList.length,children:"Checkout"})]})]}),children:Object(w.jsx)(R.b,{loading:y,itemLayout:"horizontal",dataSource:null===h||void 0===h?void 0:h.orderItemList,renderItem:function(e){return Object(w.jsx)(R.b.Item,{actions:[Object(w.jsx)(L.a,{title:"Delete from shopping cart",children:Object(w.jsx)(p.a,{icon:Object(w.jsx)(H.a,{})})})],children:Object(w.jsx)(R.b.Item.Meta,{avatar:Object(w.jsx)(B.a,{src:e.menuItem.imageUrl}),title:e.menuItem.name,description:"$".concat(e.price)})})}})})]})},Y=(n(231),n.p+"static/media/background.2702a915.jpg"),_=o.a.Header,W=o.a.Content,X=o.a.Footer,G=l.a.Title;var K=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(w.jsxs)(o.a,{style:{height:"100vh",backgroundImage:"url(".concat(Y,")")},children:[Object(w.jsx)(_,{children:Object(w.jsxs)("div",{className:"header",children:[Object(w.jsx)(G,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Online Order"}),Object(w.jsx)("div",{children:n?Object(w.jsx)($,{onLogout:function(){return a(!1)}}):Object(w.jsx)(T,{})})]})}),Object(w.jsx)(W,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(w.jsx)(U,{}):Object(w.jsx)(k,{onSuccess:function(){return a(!0)}})}),Object(w.jsx)(X,{style:{textAlign:"center",color:"white",background:"#001529"},children:"Online Order \xa92021 Created by Shaoshuai Xu"})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,250)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(w.jsx)(K,{}),document.getElementById("root")),Q()}},[[232,1,2]]]);
//# sourceMappingURL=main.d686f312.chunk.js.map